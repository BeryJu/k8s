---
apiVersion: generators.external-secrets.io/v1alpha1
kind: VaultDynamicSecret
metadata:
  name: "vault-aws-cert-manager"
  namespace: cert-manager
spec:
  path: "/aws/creds/route53"
  method: "GET"
  provider:
    server: "https://vault.beryju.org"
    auth:
      jwt:
        path: "k8s-${CLUSTER_NAME}"
        role: "external-secrets"
        kubernetesServiceAccountToken:
          serviceAccountRef:
            name: "external-secrets"
            namespace: kube-system
          audiences:
            - https://kubernetes.default.svc.cluster.local
