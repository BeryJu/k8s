apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: cert-manager-istio-csr
  namespace: cert-manager
spec:
  timeout: 30m
  chart:
    spec:
      # renovate: registryUrl=https://charts.jetstack.io
      chart: cert-manager-istio-csr
      version: 0.3.1
      sourceRef:
        kind: HelmRepository
        name: jetstack
        namespace: flux-system
  interval: 6h
  releaseName: cert-manager-istio-csr
  targetNamespace: cert-manager
  values:
    app:
      server:
        clusterID: ${CLUSTER_NAME}
      logLevel: 3
      certmanager:
        preserveCertificateRequests: true
        issuer:
          name: vault-istio-issuer
