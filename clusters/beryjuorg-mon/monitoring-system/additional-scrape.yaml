apiVersion: v1
stringData:
  additional-scrape-configs.yaml: |
    - job_name: puppetdb_linux
      puppetdb_sd_configs:
        # managed linux
        - url: http://puppet1.prod.beryju.org:8080
          query: 'resources { type = "Class" and title = "Beryjuorg_monitoring" }'
          port: 9100
        # vyos
        - url: http://puppet1.prod.beryju.org:8080
          query: 'inventory { facts.os.name = "VyOS" }'
          port: 9100
        # vyos frr
        - url: http://puppet1.prod.beryju.org:8080
          query: 'inventory { facts.os.name = "VyOS" }'
          port: 9342
      basic_auth:
        username: "prometheus"
        password_file: /var/run/secrets/beryjuorg/node-exporter/PW_NODE_EXPORTER
      scheme: https
      tls_config:
        insecure_skip_verify: true

    - job_name: puppetdb_windows
      puppetdb_sd_configs:
        - url: http://puppet1.prod.beryju.org:8080
          query: 'inventory { facts.os.name = "windows" }'
          port: 9100
    - job_name: static_misc
      static_configs:
        - targets:
            - "veeam1.mso.beryju.org:9700"

    - job_name: imagik_tig
      static_configs:
        - targets:
            - "10.51.110.26:9300"
    - job_name: "hass"
      metrics_path: "/api/prometheus"
      authorization:
        credentials_file: /var/run/secrets/beryjuorg/hass/PW_HOME_ASSISTANT
      scheme: http
      static_configs:
        - targets: ["hass1.prod.beryju.org:8123"]
kind: Secret
metadata:
  name: beryjuorg-prom-additional-scrape
  namespace: monitoring-system
type: Opaque
