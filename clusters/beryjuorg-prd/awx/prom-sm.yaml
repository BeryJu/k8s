apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: awx
  namespace: awx
spec:
  endpoints:
  - basicAuth:
      password:
        key: password
        name: prom-credentials
      username:
        key: username
        name: prom-credentials
    interval: 30s
    path: /api/v2/metrics/
    port: http
    scrapeTimeout: 3s
  selector:
    matchLabels:
      app.kubernetes.io/component: awx
      app.kubernetes.io/managed-by: awx-operator
      app.kubernetes.io/name: awx
      app.kubernetes.io/part-of: awx
