apiVersion: v1
kind: ConfigMap
metadata:
  name: acme-for-appliances-config
  namespace: acme-for-appliances
data:
  config.toml: |-
    [acme]
    directory_url = "https://acme-v02.api.letsencrypt.org/directory"
    user_email = "jens@beryju.org"
    resolvers = ["8.8.8.8:53"]
    terms_agreed = true
    challenge_provider_name = "route53"

    # ----- Appliance block
    [appliances.nappclprd1]
    type = "netapp"
    domains = [
        "nappclprd1.prod.beryju.org"
    ]
    url = "https://nappclprd1.prod.beryju.org"  # Base Connection URL
    validate_certs = false  # Validate HTTPS certificates
    username = "env:NETAPP_USERNAME"
    password = "env:NETAPP_PASSWORD"

    [appliances.nappclprd1.extension]
    cert_name_a = "cluster-le-cert-a"
    cert_name_b = "cluster-le-cert-b"
    svm_name = "nappclprd1"

    # ----- Appliance block
    [appliances.nappclprd2]
    type = "netapp"
    domains = [
        "nappclprd2.prod.beryju.org"
    ]
    url = "https://nappclprd2.prod.beryju.org"  # Base Connection URL
    validate_certs = false  # Validate HTTPS certificates
    username = "env:NETAPP_USERNAME"
    password = "env:NETAPP_PASSWORD"

    [appliances.nappclprd2.extension]
    cert_name_a = "cluster-le-cert-a"
    cert_name_b = "cluster-le-cert-b"
    svm_name = "nappclprd2"

    # ----- Appliance block
    [appliances.nappclbck1]
    type = "netapp"
    domains = [
        "nappclbck1.prod.beryju.org"
    ]
    url = "https://nappclbck1.prod.beryju.org"  # Base Connection URL
    validate_certs = false  # Validate HTTPS certificates
    username = "env:NETAPP_USERNAME"
    password = "env:NETAPP_PASSWORD"

    [appliances.nappclbck1.extension]
    cert_name_a = "cluster-le-cert-a"
    cert_name_b = "cluster-le-cert-b"
    svm_name = "nappclbck1"
